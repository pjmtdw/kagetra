- content_for :title do
  アルバム
- content_for :js_start do
  album
- content_for :css do
  album
= haml :top_bar, locals: {user: user}

#album-top
#album-year
#album-group
#album-item

%script#templ-album-top(type='text/template')
  .row
    %ul.large-block-grid-7.small-block-grid-4
      <% _.each(data.list,function(x){ %>
      %li
        %div.gbase.year(data-year='{{x?x:"_else_"}}') {{ x?x+'年':'その他' }}
      <% }) %>

%script#templ-album-year(type='text/template')
  .row
    %a(href="#") 戻る
    %ul.large-block-grid-3.small-block-grid-2
      <% _.each(data.list,function(x){ %>
      %li
        <% if(x.type == "group"){ %>
        %div.gbase.group(data-group-id='{{x.id}}')
          %div.clearfix
            %div.date.left {{ x.start_at }}
            %div.count.right {{ x.item_count }}
          %div {{ x.name }}
        <% }else{ %>
        %div.gbase.item(data-item-id='{{x.id}}')
          %div.date {{ x.date }}
          %div {{ x.name }}
        <% } %>
      <% }) %>

%script#templ-album-group(type='text/template')
  .row
    {{ data.name }}
    %ul.large-block-grid-4.small-block-grid-2
      <% _.each(data.items,function(x){ %>
      %li
        %div.gbase.thumbnail(data-item-id='{{x.id}}')
          %img(src='/static/album/thumb/{{ x.id }}')

      <% }) %>
      

%script#templ-album-item(type='text/template')
  .row
    {{ data.name }}
    %img(src='/static/album/photo/{{ data.id }}')
